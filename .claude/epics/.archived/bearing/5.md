---
name: Linking Components
status: closed
created: 2026-01-31T14:36:57Z
updated: 2026-01-31T14:42:57Z
github: https://github.com/rknuus/Bearing/issues/5
depends_on: [2]
parallel: true
conflicts_with: []
---

# Task: Linking Components

## Description
Build the reusable Svelte components that implement the visual linking mechanism: Breadcrumb for navigation, ThemeBadge for color display, and CSS infrastructure for color propagation. These components are the core of Bearing's value proposition.

## Acceptance Criteria
- [ ] Breadcrumb component renders clickable path segments
- [ ] Breadcrumb parses hierarchical IDs to build path
- [ ] ThemeBadge displays theme color as background
- [ ] CSS custom property `--theme-color` propagates to children
- [ ] Components work with mock data (no backend required)
- [ ] Components are accessible (keyboard navigation, ARIA)

## Technical Details

### Breadcrumb.svelte
```svelte
<script lang="ts">
  interface Props {
    itemId: string;  // e.g., "THEME-01.OKR-02.KR-03"
    onNavigate: (segment: string) => void;
  }
  let { itemId, onNavigate }: Props = $props();

  // Parse ID into segments with labels
  const segments = $derived(parseHierarchicalId(itemId));
</script>

<nav class="breadcrumb" aria-label="Navigation path">
  {#each segments as segment, i}
    {#if i > 0}<span class="separator">›</span>{/if}
    <button onclick={() => onNavigate(segment.id)}>
      {segment.label}
    </button>
  {/each}
</nav>
```

### ThemeBadge.svelte
```svelte
<script lang="ts">
  interface Props {
    color: string;  // hex color
    size?: 'sm' | 'md' | 'lg';
  }
  let { color, size = 'md' }: Props = $props();
</script>

<span
  class="theme-badge {size}"
  style="--theme-color: {color}; background-color: {color};"
  aria-label="Theme color indicator"
></span>
```

### Color Propagation CSS
```css
/* Container sets the theme color */
.themed-container {
  --theme-color: var(--default-theme-color, #6b7280);
}

/* Children inherit and use it */
.task-card {
  border-left: 4px solid var(--theme-color);
}

.day-cell {
  background-color: color-mix(in srgb, var(--theme-color) 20%, white);
}
```

### ID Parsing Utility
```typescript
interface BreadcrumbSegment {
  id: string;      // Full ID up to this point
  type: 'theme' | 'okr' | 'kr' | 'task';
  label: string;   // Display name
}

function parseHierarchicalId(id: string): BreadcrumbSegment[] {
  // THEME-01.OKR-02.KR-03 → [{id: "THEME-01", type: "theme", ...}, ...]
}
```

## Dependencies
- [ ] Task #2: Project Setup (Svelte 5 configured)

## Effort Estimate
- Size: M
- Hours: 6-8
- Parallel: true (can develop while #3, #4 in progress)

## Definition of Done
- [ ] Breadcrumb renders and navigates correctly
- [ ] ThemeBadge displays colors accurately
- [ ] Color propagation works via CSS custom properties
- [ ] Components have unit tests
- [ ] Storybook or test page demonstrates components
