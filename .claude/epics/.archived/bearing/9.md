---
name: Navigation
status: closed
created: 2026-01-31T14:36:57Z
updated: 2026-01-31T14:42:57Z
github: https://github.com/rknuus/Bearing/issues/9
depends_on: [6, 7, 8]
parallel: false
conflicts_with: []
---

# Task: Navigation

## Description
Implement navigation between the three planning layers: view switching via main navigation, breadcrumb-based navigation to specific items, and deep linking from any item to its parent/related items.

## Acceptance Criteria
- [ ] Main navigation bar with OKR / Calendar / Tasks tabs
- [ ] Active view highlighted in navigation
- [ ] Breadcrumb shows current context in all views
- [ ] Click breadcrumb segment → navigate to that item/view
- [ ] From Task → can navigate to its Theme and Day
- [ ] From Day → can navigate to its Theme
- [ ] From OKR → can navigate to related Days (that use this theme)
- [ ] Navigation state persists across app restarts

## Technical Details

### App.svelte Navigation Shell
```svelte
<script lang="ts">
  import OKRView from './views/OKRView.svelte';
  import CalendarView from './views/CalendarView.svelte';
  import EisenKanView from './views/EisenKanView.svelte';
  import { Breadcrumb } from '$lib/components';

  type View = 'okr' | 'calendar' | 'tasks';

  let currentView = $state<View>('okr');
  let currentItemId = $state<string | null>(null);

  function navigateTo(view: View, itemId?: string) {
    currentView = view;
    currentItemId = itemId ?? null;
    saveNavigationState();
  }

  function handleBreadcrumbNavigate(segmentId: string) {
    // Parse segment to determine view and item
    if (segmentId.startsWith('THEME-')) {
      if (segmentId.includes('.OKR-')) {
        navigateTo('okr', segmentId);
      } else {
        navigateTo('okr', segmentId);
      }
    }
    // ... handle other segment types
  }
</script>

<div class="app">
  <nav class="main-nav">
    <button
      class:active={currentView === 'okr'}
      onclick={() => navigateTo('okr')}
    >
      OKRs
    </button>
    <button
      class:active={currentView === 'calendar'}
      onclick={() => navigateTo('calendar')}
    >
      Calendar
    </button>
    <button
      class:active={currentView === 'tasks'}
      onclick={() => navigateTo('tasks')}
    >
      Tasks
    </button>
  </nav>

  {#if currentItemId}
    <Breadcrumb itemId={currentItemId} onNavigate={handleBreadcrumbNavigate} />
  {/if}

  <main>
    {#if currentView === 'okr'}
      <OKRView bind:selectedItemId={currentItemId} onNavigate={navigateTo} />
    {:else if currentView === 'calendar'}
      <CalendarView bind:selectedItemId={currentItemId} onNavigate={navigateTo} />
    {:else}
      <EisenKanView bind:selectedItemId={currentItemId} onNavigate={navigateTo} />
    {/if}
  </main>
</div>
```

### Cross-View Navigation
```typescript
// From EisenKan: Task card click can show context menu
// - "Go to Theme" → navigateTo('okr', task.themeId)
// - "Go to Day" → navigateTo('calendar', task.dayDate)

// From Calendar: Day cell can show linked tasks count
// - Click count → navigateTo('tasks') with filter for that day

// From OKR: Theme can show calendar coverage
// - "View in Calendar" → navigateTo('calendar') with theme filter
```

### Navigation State Persistence
```go
// Use existing context mechanism from EisenKan pattern
type NavigationContext struct {
    CurrentView  string `json:"currentView"`
    CurrentItem  string `json:"currentItem"`
    LastAccessed string `json:"lastAccessed"`
}

func (m *PlanningManager) LoadContext() (*NavigationContext, error)
func (m *PlanningManager) SaveContext(ctx NavigationContext) error
```

### Keyboard Navigation
- `Ctrl+1` / `Cmd+1` → OKR view
- `Ctrl+2` / `Cmd+2` → Calendar view
- `Ctrl+3` / `Cmd+3` → Tasks view
- `Backspace` → Navigate up one breadcrumb level

## Dependencies
- [ ] Task #6: OKR View (for theme navigation targets)
- [ ] Task #7: Calendar View (for day navigation targets)
- [ ] Task #8: EisenKan View (for task navigation targets)

## Effort Estimate
- Size: S
- Hours: 4-6
- Parallel: false (needs all views complete)

## Definition of Done
- [ ] Tab navigation switches between all three views
- [ ] Breadcrumb displays and navigates correctly
- [ ] Cross-view navigation works (task → theme, day → theme, etc.)
- [ ] Navigation state restored on app restart
- [ ] Keyboard shortcuts functional
