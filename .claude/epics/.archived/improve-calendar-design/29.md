---
name: Add text field to DayFocus data model
status: closed
created: 2026-02-06T14:56:53Z
updated: 2026-02-06T15:07:02Z
github: https://github.com/rknuus/Bearing/issues/29
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Add text field to DayFocus data model

## Description

Add a `text` string field to the `DayFocus` struct across all layers: Go backend, Wails binding, TypeScript types, and mock bindings. This is an additive, backward-compatible change — existing JSON data without a `text` key will deserialize with Go's zero value (empty string).

## Acceptance Criteria

- [ ] Go `DayFocus` struct in `internal/access/models.go` has `Text string \`json:"text"\`` field
- [ ] Wails binding `DayFocus` struct in `main.go` has matching `Text string \`json:"text"\`` field
- [ ] Conversion functions in `main.go` between access and binding DayFocus types map the `text` field
- [ ] TypeScript `DayFocus` class in `frontend/src/lib/wails/wailsjs/go/models.ts` has `text: string` property
- [ ] Mock `DayFocus` interface in `frontend/src/lib/wails-mock.ts` includes `text: string`
- [ ] Mock `SaveDayFocus` and `ClearDayFocus` handle the `text` field
- [ ] `make test` passes
- [ ] `make test-frontend` passes

## Technical Details

**Files to modify:**

1. `internal/access/models.go` — Add field to struct:
   ```go
   Text string `json:"text"` // Free-text content for the day
   ```

2. `main.go` — Add field to Wails binding struct and update `GetYearFocus`/`SaveDayFocus` conversion:
   ```go
   Text string `json:"text"`
   ```

3. `frontend/src/lib/wails/wailsjs/go/models.ts` — Add to class:
   ```typescript
   text: string;
   // In constructor: this.text = source["text"];
   ```

4. `frontend/src/lib/wails-mock.ts` — Add to DayFocus interface and ensure mock functions pass it through

**Key consideration:** The `ClearDayFocus` function currently preserves `notes` when clearing the theme. It should also preserve `text` when clearing.

## Dependencies

- [ ] None — this is the first task

## Effort Estimate

- Size: S
- Hours: 0.5
- Parallel: false
