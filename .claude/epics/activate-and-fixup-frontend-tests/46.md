---
name: Set up Playwright E2E infrastructure
status: open
created: 2026-02-07T16:31:23Z
updated: 2026-02-07T16:35:13Z
github: https://github.com/rknuus/Bearing/issues/46
depends_on: [45]
parallel: true
conflicts_with: []
---

# Task: Set up Playwright E2E infrastructure

## Description
Create the `tests/ui-component/` directory with its own `package.json`, test helpers, and runner script. Follow the EisenKan reference at `tmp/eisenkan/tests/ui-component/`. This task sets up the infrastructure only — the actual E2E test is created in Task 48.

## Acceptance Criteria
- [ ] `tests/ui-component/package.json` created with `@playwright/test` dependency and `"test": "node run-all-tests.js"` script
- [ ] `tests/ui-component/test-helpers.js` created with: `TEST_CONFIG` (URL: `http://localhost:5173`), `TestReporter` class, `waitForServers()` function, `isServerReady()` check
- [ ] `tests/ui-component/run-all-tests.js` created as the entry point (initially imports no test files — placeholder for Task 48)
- [ ] `npm install` in `tests/ui-component/` succeeds
- [ ] `make test-ui-component-install` works (installs deps + Chromium)
- [ ] Directory structure matches the EisenKan reference pattern

## Technical Details
- Reference: `tmp/eisenkan/tests/ui-component/test-helpers.js`, `run-all-tests.js`, `package.json`
- Adapt `TEST_CONFIG.WAILS_DEV_URL` to `http://localhost:5173` (Bearing's frontend-dev port)
- `TestReporter` class: `startTest(name)`, `pass(msg)`, `fail(err)`, `printSummary()`, `shouldExit()` — copy from EisenKan and adapt
- `waitForServers()`: HTTP fetch with retry loop against `TEST_CONFIG.WAILS_DEV_URL`
- `run-all-tests.js`: Import test modules, collect exit codes, exit with appropriate code
- Use `"type": "module"` in package.json for ES module imports
- `HEADLESS` env var controls `chromium.launch({ headless })` — default to `false`

## Dependencies
- [ ] Task 45 (Makefile targets must exist for `test-ui-component-install`)

## Effort Estimate
- Size: S
- Hours: 1-2
- Parallel: true (can run alongside Tasks 47, 44)
