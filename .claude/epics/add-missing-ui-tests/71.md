---
name: Add CalendarView unit tests
status: open
created: 2026-02-08T11:55:38Z
updated: 2026-02-08T11:58:00Z
github: https://github.com/rknuus/Bearing/issues/71
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Add CalendarView unit tests

## Description
Create `frontend/src/views/CalendarView.test.ts` with full behavioral unit tests for CalendarView. Follow the established OKRView.test.ts pattern: mock `window.go.main.App` bindings, render with @testing-library/svelte, assert on DOM via CSS selectors.

## Acceptance Criteria
- [ ] Test file created at `frontend/src/views/CalendarView.test.ts`
- [ ] >= 8 test cases covering all key behaviors
- [ ] Tests pass via `make test-frontend`
- [ ] No lint warnings via `make frontend-lint`

## Technical Details

**Mock bindings needed:** `GetThemes`, `GetYearFocus`, `SaveDayFocus`, `ClearDayFocus`, `LoadNavigationContext`, `SaveNavigationContext`

**Test cases (minimum 8):**
1. Renders calendar header with current year and navigation buttons
2. Renders 12 month columns in the calendar grid
3. Renders theme legend with theme names and colors
4. Opens edit dialog when clicking a day cell
5. Saves day focus via SaveDayFocus when submitting with theme + text
6. Clears day focus via ClearDayFocus when submitting empty fields
7. Cancels edit dialog via cancel button or Escape key
8. Navigates years with prev/next buttons
9. Shows loading state during data fetch
10. Shows error state with retry button on fetch failure

**Key selectors:**
- `.calendar-view` — root container
- `.year-title` — year display
- `.nav-button` — prev/next year buttons
- `.today-button` — today button
- `.theme-legend`, `.legend-item` — theme legend
- `.dialog-overlay`, `.dialog` — edit modal
- `.day-num`, `.day-text` — clickable day cells
- `.loading` — loading state
- `.error` — error state

**Files affected:** `frontend/src/views/CalendarView.test.ts` (new file)

## Dependencies
- [ ] None — uses existing mock bindings pattern

## Effort Estimate
- Size: M
- Parallel: true

## Definition of Done
- [ ] Code implemented
- [ ] Tests written and passing
- [ ] Lint passes
