---
name: Migrate id-parser tests from manual runner to Vitest
status: open
created: 2026-02-07T16:31:23Z
updated: 2026-02-07T16:35:13Z
github: https://github.com/rknuus/Bearing/issues/47
depends_on: [43]
parallel: false
conflicts_with: []
---

# Task: Migrate id-parser tests from manual runner to Vitest

## Description
Rewrite `frontend/src/lib/utils/id-parser.test.ts` from its custom browser-console runner (`assertEqual`, `window.runIdParserTests()`) to standard Vitest tests using `describe`/`it`/`expect`. Remove all manual test infrastructure. Preserve every existing test case and assertion.

## Acceptance Criteria
- [ ] `id-parser.test.ts` uses Vitest imports (`describe`, `it`, `expect` from `vitest`)
- [ ] All `testGetIdType()` assertions migrated (5 valid + 5 invalid = 10 test cases)
- [ ] All `testGetThemeAbbr()` assertions migrated (7 test cases)
- [ ] All `testBuildBreadcrumbs()` assertions migrated (10 test cases)
- [ ] Custom `assertEqual` function removed
- [ ] `runAllTests()` export removed
- [ ] `window.runIdParserTests` registration removed
- [ ] `npx vitest --run` passes all migrated tests
- [ ] No references to the manual test runner remain anywhere in the codebase

## Technical Details
- Source file: `frontend/src/lib/utils/id-parser.test.ts` (207 lines currently)
- The file imports `main.LifeTheme`, `main.Objective`, `main.KeyResult` from `../wails/wailsjs/go/models` â€” verify these resolve in jsdom environment. If not, inline the test fixtures as plain objects matching the type shape.
- Use `describe` blocks to group: `getIdType`, `getThemeAbbr`, `buildBreadcrumbs`
- Use `toEqual` for deep object comparisons (breadcrumbs), `toBe` for primitives
- Keep the `makeThemes()` helper as a test fixture factory
- Check if any other files import from `id-parser.test.ts` (they shouldn't, but verify)

## Dependencies
- [ ] Task 43 (Vitest must be installed and configured)

## Effort Estimate
- Size: S
- Hours: 1-2
- Parallel: false (depends on 43)
