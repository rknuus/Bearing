---
name: Extend CreateKeyResult API with start/target and update frontend form
status: closed
created: 2026-02-07T19:49:31Z
updated: 2026-02-07T19:50:52Z
github: https://github.com/rknuus/Bearing/issues/56
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Extend CreateKeyResult API with start/target and update frontend form

## Description

Add `startValue` and `targetValue` parameters to the `CreateKeyResult` API (backend interface, implementation, Wails binding) and expand the frontend KR creation form to a two-row layout with optional Start/Target number inputs. Update mock bindings to match.

## Acceptance Criteria

- [ ] `IPlanningManager.CreateKeyResult` accepts `startValue, targetValue int` parameters
- [ ] `PlanningManager.CreateKeyResult` passes start/target into the `access.KeyResult` struct
- [ ] `App.CreateKeyResult` Wails binding forwards the new parameters
- [ ] KR creation form shows description on row 1, optional Start/Target inputs on row 2
- [ ] Creating a KR with target=1 immediately renders as a checkbox
- [ ] Creating a KR with target>1 immediately renders with a progress bar
- [ ] Creating a KR with no start/target (both 0) renders as untracked (backward compatible)
- [ ] Enter in description field still triggers create
- [ ] Mock `CreateKeyResult` in `wails-mock.ts` accepts and stores start/target
- [ ] Existing unit tests updated to pass new parameters
- [ ] New unit test verifies non-zero start/target are persisted
- [ ] `make backend-test`, `make frontend-lint`, `make frontend-check`, `make frontend-build` all pass

## Technical Details

### Backend (3 files)
- `internal/managers/planning_manager.go` line 42: Change interface signature to `CreateKeyResult(parentObjectiveId, description string, startValue, targetValue int)`
- `internal/managers/planning_manager.go` line 340: Change implementation signature, update line 357 to include `StartValue: startValue, TargetValue: targetValue` in the struct literal
- `main.go` line 315: Change `App.CreateKeyResult` binding to accept and forward the new params
- `internal/managers/planning_manager_test.go`: Update existing `CreateKeyResult` test calls, add test case with non-zero values

### Frontend (2 files)
- `frontend/src/views/OKRView.svelte`:
  - Add `newKeyResultStartValue` and `newKeyResultTargetValue` state (default 0)
  - Expand the KR creation form block (around line 460) to two rows with Start/Target inputs
  - Update `createKeyResult()` (line 242) to pass new values and reset them on success
- `frontend/src/lib/wails-mock.ts`:
  - Update `CreateKeyResult` mock to accept `startValue`, `targetValue` and store on new KR

## Dependencies

- None (measure-okr-progress already merged)

## Effort Estimate

- Size: S
- Parallel: N/A (single task)

## Definition of Done

- [ ] Code implemented across all 5 files
- [ ] Backend tests pass (`make backend-test`)
- [ ] Frontend lint passes (`make frontend-lint`)
- [ ] Frontend type-check passes (`make frontend-check`)
- [ ] Frontend build succeeds (`make frontend-build`)
