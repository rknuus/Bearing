---
name: Extend KeyResult model and add UpdateKeyResultProgress backend method
status: open
created: 2026-02-07T19:10:53Z
updated: 2026-02-07T19:13:15Z
github: https://github.com/rknuus/Bearing/issues/52
depends_on: []
parallel: false
conflicts_with: [53]
---

# Task: Extend KeyResult model and add UpdateKeyResultProgress backend method

## Description

Add `startValue`, `currentValue`, and `targetValue` integer fields to the KeyResult model in both the access layer and Wails binding layer. Add a new `UpdateKeyResultProgress` method that updates only the `currentValue` of a key result (for quick progress updates without full KR edits). Wire it through access → manager → App binding. Add unit tests.

## Acceptance Criteria

- [ ] `KeyResult` struct in `internal/access/models.go` has `StartValue int`, `CurrentValue int`, `TargetValue int` fields with JSON tags `startValue`, `currentValue`, `targetValue`
- [ ] `KeyResult` struct in `main.go` (Wails binding) has matching fields
- [ ] Existing KRs with no progress fields in JSON deserialize with zero defaults (backward compatible)
- [ ] `UpdateKeyResultProgress(keyResultId string, currentValue int) error` exists on `IPlanningManager` interface, `PlanningManager`, and `App`
- [ ] The method tree-walks themes to find the KR, updates only `currentValue`, and saves the theme
- [ ] `UpdateKeyResult` continues to work for description-only updates (existing behavior preserved)
- [ ] Unit tests cover: progress update on top-level KR, progress update on nested KR, error for non-existent KR, error for empty ID
- [ ] `make test` passes with no regressions

## Technical Details

### Files modified
- `internal/access/models.go` — Add 3 fields to `KeyResult`
- `main.go` — Add 3 fields to Wails `KeyResult` struct, add `App.UpdateKeyResultProgress` binding method, update `convertKeyResultToAccess` / `convertKeyResultFromAccess` if they exist
- `internal/managers/planning_manager.go` — Add `UpdateKeyResultProgress` to interface and implementation (follows same pattern as `UpdateKeyResult`)
- `internal/managers/planning_manager_test.go` — Add `TestUpdateKeyResultProgress` test cases

### Implementation notes
- The new method follows the exact same pattern as `UpdateKeyResult` (lines 388-412 of planning_manager.go): load themes, find KR via `findKeyResultParent`, update field, save theme.
- The KR edit dialog (#53) will set `startValue`/`targetValue` through the existing `UpdateTheme` full-save path — no new method needed for those fields.

## Dependencies
- [ ] None — this is the first task

## Effort Estimate
- Size: S
- Hours: 1-2
- Parallel: false
