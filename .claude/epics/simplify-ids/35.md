---
name: Rewrite frontend id-parser and tests
status: done
created: 2026-02-07T14:30:24Z
updated: 2026-02-07T14:33:28Z
github: https://github.com/rknuus/Bearing/issues/35
depends_on: [39]
parallel: true
conflicts_with: []
---

# Task: Rewrite frontend id-parser and tests

## Description
Rewrite `id-parser.ts` to work with flat IDs. Replace hierarchical ID parsing (splitting on dots) with prefix-based type detection. Update or replace breadcrumb building to use parentId chains from theme data.

## Acceptance Criteria
- [ ] `getIdType()` detects type from prefix: `THEME-`, `OBJ-`, `KR-`, `TASK-`
- [ ] `parseHierarchicalId()` removed or replaced with `buildBreadcrumbs(id, themes)` that walks parentId
- [ ] `getParentId()` removed or updated (parentId is now a data field, not parsed from string)
- [ ] All id-parser tests updated and passing
- [ ] `make frontend-lint` and `make frontend-check` pass

## Technical Details

**Files affected:**
- `frontend/src/lib/utils/id-parser.ts`
- `frontend/src/lib/utils/id-parser.test.ts`

**New `getIdType()` logic:**
```typescript
if (id.startsWith('THEME-')) return 'theme';
if (id.startsWith('OBJ-')) return 'okr';
if (id.startsWith('KR-')) return 'kr';
if (id.startsWith('TASK-')) return 'task';
```

**New breadcrumb function** (if needed by OKRView):
- Takes an entity ID and the themes array
- Walks up via `parentId` fields to build the breadcrumb chain
- Returns array of `BreadcrumbSegment` objects

## Effort Estimate
- Size: S
- Parallel: true â€” independent of tasks #40, #41, #37, #38
