---
name: EisenKan View
status: closed
created: 2026-01-31T14:36:57Z
updated: 2026-01-31T14:42:57Z
github: https://github.com/rknuus/Bearing/issues/8
depends_on: [4, 5]
parallel: true
conflicts_with: [6, 7]
---

# Task: EisenKan View

## Description
Implement the short-term task execution view: a Kanban board where tasks are created with Eisenhower priority and auto-sorted in the Todo column. Tasks inherit theme color from their assigned day/theme.

## Acceptance Criteria
- [ ] Kanban board with configurable columns (Todo, Doing, Done as default)
- [ ] Create task requires Eisenhower priority selection (Q1, Q2, Q3 only)
- [ ] Todo column auto-sorts by priority (important-urgent → important-not-urgent → not-important-urgent)
- [ ] Tasks display theme color (inherited from themeId)
- [ ] Drag-and-drop moves tasks between columns
- [ ] Task move = file move in git (verify in history)
- [ ] Task card shows: title, priority badge, theme color

## Technical Details

### EisenKanView.svelte Structure
```svelte
<script lang="ts">
  import { ThemeBadge, Breadcrumb } from '$lib/components';
  import { getTasks, createTask, moveTask } from '$lib/api';

  let tasks = $state<Task[]>([]);
  let columns = $state(['todo', 'doing', 'done']);

  const priorityOrder = {
    'important-urgent': 1,
    'important-not-urgent': 2,
    'not-important-urgent': 3
  };

  const sortedTodo = $derived(
    tasks
      .filter(t => t.status === 'todo')
      .sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority])
  );
</script>

<div class="eisenkan-view">
  <header>
    <h1>Tasks</h1>
    <button onclick={openCreateDialog}>+ New Task</button>
  </header>

  <div class="board">
    {#each columns as column}
      <div class="column" data-column={column}>
        <h2>{column}</h2>
        <div class="task-list" ondrop={e => handleDrop(e, column)}>
          {#each getTasksForColumn(column) as task}
            <div
              class="task-card"
              draggable="true"
              style="--theme-color: {getThemeColor(task.themeId)}"
            >
              <span class="priority-badge {task.priority}">
                {getPriorityLabel(task.priority)}
              </span>
              <span class="task-title">{task.title}</span>
              <ThemeBadge color={getThemeColor(task.themeId)} size="sm" />
            </div>
          {/each}
        </div>
      </div>
    {/each}
  </div>
</div>
```

### Priority Selection UI
```svelte
<!-- In Create Task Dialog -->
<fieldset class="priority-selector">
  <legend>Priority (Eisenhower)</legend>
  <label class="priority-option q1">
    <input type="radio" name="priority" value="important-urgent" />
    <span>Important & Urgent</span>
    <small>Do first</small>
  </label>
  <label class="priority-option q2">
    <input type="radio" name="priority" value="important-not-urgent" />
    <span>Important & Not Urgent</span>
    <small>Schedule</small>
  </label>
  <label class="priority-option q3">
    <input type="radio" name="priority" value="not-important-urgent" />
    <span>Not Important & Urgent</span>
    <small>Delegate</small>
  </label>
  <!-- Q4 intentionally omitted -->
</fieldset>
```

### File Movement for Status Changes
```go
// In PlanAccess
func (a *PlanAccess) MoveTask(taskId, newStatus string) error {
    // Parse taskId to get theme
    themeId := extractThemeId(taskId)
    oldPath := a.getTaskPath(taskId) // e.g., data/tasks/THEME-01/todo/task-001.json
    newPath := filepath.Join(a.dataDir, "tasks", themeId, newStatus, filepath.Base(oldPath))

    tx, _ := a.repo.Begin()
    defer tx.Cancel()

    // Use git mv via file system + stage
    os.Rename(oldPath, newPath)
    tx.Stage([]string{oldPath, newPath})
    tx.Commit(fmt.Sprintf("Move task %s to %s", taskId, newStatus))

    return nil
}
```

### Wails Bindings
```go
func (m *PlanningManager) GetTasks() ([]Task, error)
func (m *PlanningManager) CreateTask(title, themeId, dayDate, priority string) (*Task, error)
func (m *PlanningManager) MoveTask(taskId, newStatus string) error
func (m *PlanningManager) UpdateTask(task Task) error
func (m *PlanningManager) DeleteTask(taskId string) error
```

## Dependencies
- [ ] Task #4: Data Model (Task struct, PlanAccess.MoveTask)
- [ ] Task #5: Linking Components (ThemeBadge, color propagation)

## Effort Estimate
- Size: M
- Hours: 10-14
- Parallel: true (can run with #6, #7 but may have merge conflicts)

## Definition of Done
- [ ] Kanban board renders with 3 columns
- [ ] Task creation enforces priority selection
- [ ] Todo column auto-sorted by Eisenhower priority
- [ ] Drag-and-drop moves tasks
- [ ] Task files physically move between directories
- [ ] Git history shows file moves (not delete+create)
- [ ] Theme colors display on task cards
