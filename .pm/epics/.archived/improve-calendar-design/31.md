---
name: Implement cell rendering and styling
status: closed
created: 2026-02-06T14:56:53Z
updated: 2026-02-06T15:07:02Z
github: https://github.com/rknuus/Bearing/issues/31
depends_on: [30]
parallel: false
conflicts_with: [30, 32]
---

# Task: Implement cell rendering and styling

## Description

Implement the visual rendering and CSS styling for the day-number and text sub-columns in the new weekday-aligned grid. This includes rectangular cell dimensions, Sunday background rules, theme color application, today indicator, and text overflow handling. Also remove the old task count badge rendering.

## Acceptance Criteria

- [ ] Day-number cells are narrow (~24px), right-aligned, with subtle background
- [ ] Text cells are wide (1fr), left-aligned, with `overflow: hidden; text-overflow: ellipsis; white-space: nowrap`
- [ ] Cell height is ~1.5rem (one line of text), giving width:height ratio of ~4–5:1
- [ ] Sunday rows have a distinct background color (`#eef2ff` or similar)
- [ ] Saturday rows have the same background as weekdays (no special styling)
- [ ] When a theme color is assigned to a Sunday: day-number cell retains Sunday background, text cell shows theme color
- [ ] When a theme color is assigned to a non-Sunday: both day-number and text cells show theme color
- [ ] Today's date has a visible outline/indicator on both sub-columns
- [ ] Text content from `DayFocus.text` displays in the text cell with ellipsis crop
- [ ] Task count badges are removed (no `.task-count-badge` rendering)
- [ ] Note indicator (`*`) is removed (notes are superseded by the text cell)
- [ ] Theme dot is removed (theme color is shown as cell background instead)
- [ ] Empty cells (no day for that row/month) are visually distinct (light gray or transparent)

## Technical Details

**Day-number cell:**
```css
.day-num {
  padding: 0 4px;
  text-align: right;
  font-size: 0.7rem;
  color: #6b7280;
  background: white;
}
.day-num.sunday { background: #eef2ff; }
.day-num.themed:not(.sunday) { background-color: var(--theme-bg); }
```

**Text cell:**
```css
.day-text {
  padding: 0 4px;
  font-size: 0.7rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  background: white;
  cursor: pointer;
}
.day-text.sunday { background: #eef2ff; }
.day-text.themed { background-color: var(--theme-bg); }
```

**Sunday detection:**
```typescript
function isSunday(row: number): boolean {
  return row % 7 === 6; // Mon=0, Tue=1, ..., Sun=6
}
```

**Theme color application logic:**
```typescript
// For each day cell:
const isSun = isSunday(getDayRow(year, month, day));
const color = getThemeColor(month, day);
// Day-number: background = isSun ? sundayBg : (color ? color+'20' : 'white')
// Text cell:  background = color ? color+'20' : (isSun ? sundayBg : 'white')
```

**Files to modify:**
- `frontend/src/views/CalendarView.svelte` — Template (cell markup) and style section

## Dependencies

- [ ] Task #30 — Grid layout must be in place

## Effort Estimate

- Size: M
- Hours: 1.5
- Parallel: false
