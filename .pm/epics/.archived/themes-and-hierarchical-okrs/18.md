---
name: Refactor OKRView to use recursive objective rendering
status: closed
created: 2026-02-06T10:11:45Z
updated: 2026-02-06T10:17:09Z
github: https://github.com/rknuus/Bearing/issues/18
depends_on: [20]
parallel: false
conflicts_with: []
---

# Refactor OKRView to use recursive objective rendering

## Description

Replace the fixed 3-level accordion in `frontend/src/views/OKRView.svelte` with a recursive approach. Either extract a recursive `ObjectiveNode` component or use a recursive `{#snippet}` in Svelte 5. Use a single `expandedIds: Set<string>` instead of the separate `expandedThemes`/`expandedObjectives` sets. Each objective node renders: title (inline edit), expand/collapse toggle, child objectives (recurse), key results, "Add child objective" / "Add key result" buttons. Indentation increases with depth to show hierarchy. `CreateObjective` calls use `parentId` (theme ID or objective ID).

## Acceptance Criteria

- [ ] Can view/expand/collapse objectives at any depth
- [ ] Can create child objectives under any objective
- [ ] Can add key results at any level
- [ ] Inline editing works at all levels
- [ ] Breadcrumb reflects full path
- [ ] Fixed 3-level accordion is replaced with a recursive rendering approach
- [ ] A single `expandedIds: Set<string>` replaces separate `expandedThemes`/`expandedObjectives`
- [ ] Indentation increases with depth to visually communicate hierarchy
- [ ] `CreateObjective` calls pass `parentId` (either a theme ID or an objective ID)

## Technical Details

- **Files**: `frontend/src/views/OKRView.svelte` (possibly extract a component to `frontend/src/lib/components/`)
- Replace the hardcoded 3-level rendering with either:
  - A separate `ObjectiveNode.svelte` component that renders itself recursively for child objectives
  - A recursive `{#snippet}` block in Svelte 5 within the existing `OKRView.svelte`
- Collapse the `expandedThemes` and `expandedObjectives` reactive sets into a single `expandedIds: Set<string>` that tracks expand/collapse state for all node types
- Each objective node at any depth renders:
  - Title with inline edit capability
  - Expand/collapse toggle
  - Child objectives (rendered recursively)
  - Key results list
  - "Add child objective" button
  - "Add key result" button
- Indentation should increase per nesting level (e.g., using `padding-left` or `margin-left` scaled by depth)
- `CreateObjective(parentId, title)` — `parentId` is either a theme ID or an objective ID

## Dependencies

- Depends on #20 (Wails App binding updates) — the frontend needs the updated bindings to call the recursive CRUD methods

## Effort Estimate

- **Size**: M
- **Hours**: 3

## Definition of Done

- The fixed 3-level accordion in `OKRView.svelte` is replaced with a recursive rendering approach
- Objectives at any nesting depth can be viewed, expanded, collapsed, created, and edited inline
- Key results can be added at any level in the hierarchy
- Breadcrumb navigation reflects the full hierarchical path
- A single `expandedIds` set manages expand/collapse state for all nodes
- Visual indentation clearly communicates nesting depth
- All existing OKR view functionality continues to work
