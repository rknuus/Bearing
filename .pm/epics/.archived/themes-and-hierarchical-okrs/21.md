---
name: Update mock bindings for browser-mode testing
status: closed
created: 2026-02-06T10:11:45Z
updated: 2026-02-06T10:17:09Z
github: https://github.com/rknuus/Bearing/issues/21
depends_on: [20]
parallel: true
conflicts_with: []
---

# Update mock bindings for browser-mode testing

## Description

Update `frontend/src/lib/wails-mock.ts` mock CRUD to handle nested objectives. Mock `CreateObjective(parentId, title)` must walk the mock theme tree to find the parent (theme or objective). Mock `CreateKeyResult`, `Update`, and `Delete` must also tree-walk. ID generation in mocks must mirror the backend pattern (nested `OKR-XX` segments). Update mock data to include at least one nested objective example.

## Acceptance Criteria

- [ ] Browser mode (`make frontend-dev`) shows nested objectives
- [ ] Can create objectives at any nesting level in browser mode
- [ ] Can edit objectives at any nesting level in browser mode
- [ ] Can delete objectives at any nesting level in browser mode
- [ ] Mock IDs match backend pattern (e.g., `THEME-01.OKR-01.OKR-01`)
- [ ] Mock `CreateObjective(parentId, title)` walks the theme tree to find the parent
- [ ] Mock `CreateKeyResult`, `Update`, and `Delete` use tree-walk to locate targets
- [ ] Mock data includes at least one nested objective example out of the box

## Technical Details

- **Files**: `frontend/src/lib/wails-mock.ts`
- Update `CreateObjective` mock to accept `parentId` (theme ID or objective ID) and `title`, walk the mock data tree to find the parent node, and append a new objective to its `objectives` array
- Update `CreateKeyResult` mock to tree-walk to the target objective and append the key result
- Update `UpdateObjective`, `UpdateKeyResult`, `DeleteObjective`, `DeleteKeyResult` mocks to use recursive tree-walking to find and mutate/remove the target
- ID generation must follow the backend convention: each nesting level appends `.OKR-XX`, and key results use `<parent>.KR-XX`
- Add at least one pre-populated nested objective in the default mock data (e.g., a child objective under `THEME-01.OKR-01`)

## Dependencies

- Depends on #20 (Wails App binding updates) â€” the mock must match the updated function signatures
- Can be done in parallel with #18 (frontend refactor)

## Effort Estimate

- **Size**: S
- **Hours**: 1.5

## Definition of Done

- All mock CRUD functions handle nested objectives via tree-walking
- Mock ID generation mirrors the backend hierarchical ID pattern
- Default mock data includes at least one nested objective
- Browser mode (`make frontend-dev`) renders nested objectives and supports full CRUD at all levels
- No regressions in browser-mode testing for flat (non-nested) objectives
