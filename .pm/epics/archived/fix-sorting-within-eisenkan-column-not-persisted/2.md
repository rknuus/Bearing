---
name: Access layer — LoadTaskOrder/SaveTaskOrder
status: closed
created: 2026-02-20T15:47:33Z
updated: 2026-02-20T15:47:33Z
github: Will be updated when synced to GitHub
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Access layer — LoadTaskOrder/SaveTaskOrder

## Description
Add `LoadTaskOrder` and `SaveTaskOrder` methods to `IPlanAccess` and `PlanAccess` for reading and writing `task_order.json`. This file stores a `map[string][]string` mapping drop zone IDs to ordered task IDs.

## Acceptance Criteria
- [ ] `IPlanAccess` interface extended with `LoadTaskOrder() (map[string][]string, error)` and `SaveTaskOrder(order map[string][]string) error`
- [ ] `LoadTaskOrder` reads `~/.bearing/data/task_order.json` and returns the parsed map
- [ ] `LoadTaskOrder` returns an empty map (not error) when the file doesn't exist
- [ ] `SaveTaskOrder` writes the order map to `task_order.json` as formatted JSON and git-commits
- [ ] Unit tests cover: read existing file, read missing file, write and read back, concurrent access safety

## Technical Details
- File location: `filepath.Join(pa.dataPath, "task_order.json")`
- Use `os.ReadFile`/`os.WriteFile` with `json.Marshal`/`json.Unmarshal`
- Follow existing patterns in `plan_access.go` for file I/O and git commits
- The git commit message should follow the pattern used by other access methods (e.g., `SaveTask`)
- Drop zone IDs: priority labels for Todo sections (`important-urgent`, `important-not-urgent`, `not-important-urgent`, `not-important-not-urgent`), column names for others (`doing`, `done`)

## Dependencies
- [ ] None — this is the foundation layer

## Effort Estimate
- Size: S
- Parallel: false (foundation for all other tasks)

## Definition of Done
- [ ] Code implemented
- [ ] Tests written and passing
- [ ] Linting passes
