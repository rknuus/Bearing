---
name: Add view-level show/hide toggles with NavigationContext persistence
status: open
created: 2026-02-07T20:01:06Z
updated: 2026-02-07T20:02:00Z
github: https://github.com/rknuus/Bearing/issues/63
depends_on: [064, 061]
parallel: false
conflicts_with: []
---

# Task: Add view-level show/hide toggles with NavigationContext persistence

## Description
Add two toggle checkboxes to the OKR view header: "Show completed" and "Show archived". When "Show completed" is off (default), all completed-but-not-archived items are hidden. When "Show archived" is off (default), all archived items are hidden. Toggle states are loaded from and saved to NavigationContext for cross-session persistence.

## Acceptance Criteria
- [ ] "Show completed" checkbox in OKR view header, default unchecked
- [ ] "Show archived" checkbox in OKR view header, default unchecked
- [ ] When "Show completed" is unchecked, Objectives and KRs with status "completed" are not rendered
- [ ] When "Show archived" is unchecked, Objectives and KRs with status "archived" are not rendered
- [ ] When both are checked, all items are visible (with dimmed styling from Task 061)
- [ ] Toggle state loaded from NavigationContext on mount
- [ ] Toggle state saved to NavigationContext when changed
- [ ] Filtering works correctly with nested objectives (if a parent is active but a child is completed, the child is hidden but parent remains visible)
- [ ] If all children of an active objective are hidden by filters, the objective still shows (not hidden by cascade)
- [ ] Works in all three dev environments (native, Wails dev, Vite mock)

## Technical Details
- File: `frontend/src/views/OKRView.svelte`
- Add state: `let showCompleted = $state(false)` and `let showArchived = $state(false)`
- On mount: load NavigationContext, set toggle states from `showCompleted`/`showArchived` fields
- Use `$effect` to save toggle state changes to NavigationContext (read toggles, `untrack` the save call to avoid loops)
- Filter logic in the template: wrap Objective/KR rendering in `{#if}` blocks checking status against toggle state
- Helper: `shouldShow(status: string | undefined): boolean` â€” returns true if item should be visible given current toggle states
- Add toggles in `.okr-header` next to the "+ Add Theme" button

## Dependencies
- [ ] Task 064 (NavigationContext fields must exist)
- [ ] Task 061 (status action buttons and styling must be in place)

## Effort Estimate
- Size: M
- Parallel: false (depends on 064 and 061)

## Definition of Done
- [ ] Code implemented
- [ ] Toggle persistence works across page reloads
- [ ] Filtering correctly hides/shows items at all nesting levels
- [ ] No infinite reactive loops (verified by ESLint and manual testing)
- [ ] Frontend linter passes (`make frontend-lint`)
- [ ] Type checks pass (`make frontend-check`)
