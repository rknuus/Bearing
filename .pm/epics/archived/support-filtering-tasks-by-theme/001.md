---
name: Update Go NavigationContext struct with FilterThemeIDs
status: done
created: 2026-02-13T15:37:02Z
updated: 2026-02-13T15:37:02Z
github: [Will be updated when synced to GitHub]
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Update Go NavigationContext struct with FilterThemeIDs

## Description
Add `FilterThemeIDs []string` field to the Go `NavigationContext` struct alongside the existing `FilterThemeID string` field for backward compatibility. Existing navigation_context.json files with the old single-string field will be silently preserved; the frontend migration logic (task 002) will handle reading both.

## Acceptance Criteria
- [ ] `NavigationContext` struct in `internal/access/models.go` has new `FilterThemeIDs []string` field with JSON tag `"filterThemeIds"`
- [ ] Existing `FilterThemeID string` field with JSON tag `"filterThemeId"` is retained (backward compat)
- [ ] JSON round-trip works: marshal/unmarshal preserves both fields
- [ ] All existing Go tests pass (`make test-backend`)
- [ ] No changes to SaveNavigationContext / LoadNavigationContext logic (JSON marshaling handles it)

## Technical Details

### File affected
- **Modified**: `internal/access/models.go`

### Change
Add one field to the `NavigationContext` struct:
```go
type NavigationContext struct {
    CurrentView    string   `json:"currentView"`
    CurrentItem    string   `json:"currentItem"`
    FilterThemeID  string   `json:"filterThemeId"`    // deprecated, kept for backward compat
    FilterThemeIDs []string `json:"filterThemeIds"`   // new: multi-theme filter
    FilterDate     string   `json:"filterDate"`
    // ... rest unchanged
}
```

### Key considerations
- No migration logic in Go — the frontend will handle reading `FilterThemeID` and migrating to `FilterThemeIDs`
- Wails binding regeneration may be needed if TypeScript types are auto-generated
- An empty `FilterThemeIDs` marshals as `null` in JSON (not `[]`), which is fine — frontend handles both

## Dependencies
- None

## Effort Estimate
- Size: XS
- Hours: 0.5
- Parallel: false
