---
name: Add GetLocale() Go backend method
status: open
created: 2026-02-13T16:12:10Z
updated: 2026-02-13T16:12:10Z
github: [Will be updated when synced to GitHub]
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Add GetLocale() Go backend method

## Description
Add a `GetLocale()` method to the `App` receiver in `main.go` that detects the macOS system locale and returns a BCP 47 locale tag (e.g. `en-CH`). This is the foundation for consistent date formatting across all environments.

## Acceptance Criteria
- [ ] `GetLocale()` method added to `App` receiver in `main.go`
- [ ] Reads macOS locale via `defaults read NSGlobalDomain AppleLocale`
- [ ] Converts underscore notation to BCP 47 (`en_CH` → `en-CH`)
- [ ] Falls back to `LANG` environment variable if macOS command fails
- [ ] Returns `"en-US"` as ultimate fallback
- [ ] Unit test verifies a valid BCP 47 tag is returned
- [ ] Wails bindings regenerated (`make generate`)

## Technical Details
- Add method to `App` receiver in `main.go`
- Use `os/exec` to run `defaults read NSGlobalDomain AppleLocale`
- Parse output, replace `_` with `-` for BCP 47 format
- Fallback chain: AppleLocale → LANG env var → "en-US"
- Run `make generate` after adding the method to regenerate Wails TypeScript bindings

## Dependencies
- [ ] None — this is a foundational task

## Effort Estimate
- Size: S
- Hours: 2
- Parallel: true
