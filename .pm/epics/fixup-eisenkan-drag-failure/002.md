---
name: Fix ProcessPriorityPromotions startup error
status: open
created: 2026-02-13T10:15:54Z
updated: 2026-02-13T10:15:54Z
github: [Will be updated when synced to GitHub]
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Fix ProcessPriorityPromotions startup error

## Description

The `ProcessPriorityPromotions` API call in `EisenKanView.svelte`'s `onMount` fails with `[EisenKan] Failed to process priority promotions`. The mock binding exists and works correctly (returns `[]` when no tasks qualify). Investigate and fix the root cause — likely a backend initialization timing issue or a mismatch between the frontend call and backend expectations.

## Acceptance Criteria

- [ ] `ProcessPriorityPromotions` executes without error on board mount in all three environments (native, Wails dev, Vite mock)
- [ ] Tasks with expired promotion dates are automatically promoted on board load
- [ ] The error is handled gracefully if promotions truly fail (non-blocking)

## Technical Details

### Files to Investigate
- `main.go` — `ProcessPriorityPromotions` binding (around line 610+)
- `internal/managers/planning_manager.go` — manager implementation
- `frontend/src/lib/wails-mock.ts` — mock binding (lines 682-700, already correct)
- `frontend/src/views/EisenKanView.svelte` — `onMount` call (lines 239-247)

### Investigation Steps
1. Check the Go backend `ProcessPriorityPromotions` method — does it handle edge cases (empty task list, no qualifying tasks)?
2. Check if `planningManager` is nil when the frontend calls the API (initialization race)
3. Reproduce in the Vite mock environment (`localhost:5173`) — if the mock works there, the issue is backend-specific
4. Check error logging — the current catch block swallows the actual error message; temporarily log it for debugging

### Key Considerations
- The error is currently non-blocking (caught and logged) — the board still loads
- The mock returns `[]` for no qualifying tasks, which is valid
- The log file shows this error occurs during initial Vite connection, suggesting it may be a timing issue

## Dependencies

- [ ] No task dependencies — can start immediately

## Effort Estimate
- Size: S
- Parallel: true
