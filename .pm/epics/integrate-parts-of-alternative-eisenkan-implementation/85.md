---
name: Extend Task model, storage layer, and Wails bindings
status: open
created: 2026-02-08T14:54:43Z
updated: 2026-02-08T14:59:38Z
github: https://github.com/rknuus/Bearing/issues/85
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Extend Task model, storage layer, and Wails bindings

## Description

Extend the existing `access.Task` struct with all fields needed by the EisenKan reference: description, tags, due date, promotion date, parent task ID, and timestamps. Update `PlanAccess` to read/write these fields. Add `GetBoardConfiguration` to return column/section definitions. Expose all task APIs (GetTasks, CreateTask, UpdateTask, MoveTask, DeleteTask, GetBoardConfiguration) as Wails bindings in `main.go` — these are currently only available via mock bindings.

## Acceptance Criteria

- [ ] `access.Task` struct includes: `Description string`, `Tags []string`, `DueDate string`, `PromotionDate string`, `ParentTaskID *string`, `CreatedAt string`, `UpdatedAt string`
- [ ] `CascadePolicy` type added with constants: `NoAction`, `Archive`, `Delete`, `Promote`
- [ ] `TaskWithStatus` response includes computed `SubtaskIDs []string` field
- [ ] Existing task JSON files load without errors (new fields have zero-value defaults)
- [ ] `PlanAccess` methods handle new fields in read/write/move operations
- [ ] `GetBoardConfiguration()` returns column definitions with semantic types (todo with Eisenhower sections, doing, done)
- [ ] `QueryCriteria` struct supports filtering by: columns, sections, priority, date ranges, tags, hierarchy level
- [ ] All task + board config methods exposed as Wails bindings in `main.go`
- [ ] Go unit tests pass for extended model and access layer
- [ ] Existing task operations (create, move, delete) continue to work unchanged

## Technical Details

**Files to modify:**
- `internal/access/models.go` — extend `Task` struct, add `CascadePolicy`, add `QueryCriteria`, add `BoardConfiguration` types
- `internal/access/plan_access.go` — update `SaveTask`, `GetTasksByStatus`, `GetTasksByTheme`, `MoveTask`, `DeleteTask` for new fields; add `GetBoardConfiguration()`, `GetTasksFiltered(criteria)`
- `internal/managers/planning_manager.go` — update `CreateTask`/`UpdateTask` signatures to accept new fields; add `GetBoardConfiguration()` method; update `GetTasks` to populate `SubtaskIDs`
- `main.go` — add Wails bindings for: `GetTasks`, `CreateTask`, `UpdateTask`, `MoveTask`, `DeleteTask`, `GetBoardConfiguration`

**Key considerations:**
- New fields are JSON `omitempty` so existing task files remain compatible
- `CreatedAt` set on creation, `UpdatedAt` set on every save
- `GetBoardConfiguration` returns a static config initially (3 columns, todo has 4 Eisenhower sections)
- `SubtaskIDs` computed by scanning tasks with matching `ParentTaskID`, not stored

**Reference:** `tmp/eisenkan/internal/resource_access/board_access/` for field definitions and storage patterns

## Dependencies

- [ ] None — this is the foundation task

## Effort Estimate

- Size: L
- Parallel: false — all subsequent tasks depend on this
